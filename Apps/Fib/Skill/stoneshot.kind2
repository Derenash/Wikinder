#kdl_name = Fib_skl_stsh
Apps.Fib.Skill.stoneshot : Apps.Fib.Interaction Unit {
  do Apps.Fib.Interaction {

    let skill_id  = U120.new 0 9
    let main_dmg  = U120.new 0 25
    let coll_dmg  = U120.new 0 10
    let range     = U120.new 0 3
    let area      = U120.new 0 3
    let speed     = U120.new 0 50

    // Verifies if the enemy is in range
    Apps.Fib.Interaction.skill.check_range range
    ask cooldown = Apps.Fib.Interaction.player.cooldown speed
                   Apps.Fib.Interaction.player.cast_skill cooldown

    ask target   = Apps.Fib.Interaction.target.get

    // Damages for more in the center and less on the corners
    let func = 
      (pos: U120) =>
        do Apps.Fib.Interaction {
          Apps.Fib.Interaction.damage coll_dmg pos
          return Unit.new
        }

    // Get the delta of all coordinates within 2 tiles of a point
    let delta = Apps.Fib.Pos.Delta.filled_square range

    // Get the coords for a filled square 
    let area  = Apps.Fib.Pos.range target delta

    Apps.Fib.Interaction.damage main_dmg target
    Apps.Fib.Interaction.area.generic func area

    // Adds Fatigue to the caster
    Apps.Fib.Interaction.skill.event_use skill_id
    return Unit.new
  }
}
